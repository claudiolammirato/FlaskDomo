{% extends "base.html" %}
{% block head %}
<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/temperature.css') }}">
<script src="{{ url_for('static', filename='js/flot/jquery.js') }}"></script>
<script src="{{ url_for('static', filename='js/flot/jquery.flot.js') }}"></script>
<script src="{{ url_for('static', filename='js/flot/jquery.flot.tooltip.js') }}"></script>
<script>

<script
    src="//cdnjs.cloudflare.com/ajax/libs/flot/0.8.2/jquery.flot.time.min.js">
  </script>

<script>
  var chart;

  function get_data() {

    $.ajax({
        url: '/gettempdata',
        type: 'GET',
        dataType: 'json',
        success: on_data
      })
    }

  function on_data(data) {


    var d = new Array();

    for (i=0;i<Object.keys(data).length;i++) {
      d[i]=new Array();
      d[i][1]=data[i].temperature;
      d[i][0]=data[i].date*1000;

    }
    var options = {
    

	};
     //alert(d);
    //var d2 = [[data[0].date, data[0].temperature], [data[1].date, data[1].temperature]];
    //chart.setData([{data: data.values}]);
    $.plot(("#placeholder"),[d], options);
    //chart.setData([d2]);
    //chart.setupGrid();

    //chart.draw();

    //setTimeout(get_data, 1000);
  }

  $(function() {
  //  chart = $.plot("#placeholder", [ ], {xaxis: {mode: "time"}});

    get_data();
  });

</script>


{% endblock %}
{% block title %}Temperature{% endblock %}

{% block content %}


    <h1>Temperature</h1>
    <p>Here you can see the room temperature</p>

      <div id="placeholder" style="width:600px;height:300px;"></div>


    <p>This page can only be viewed by logged in users.</p>
    <p>You are logged in as <b>{{ current_user.username }}</b>.</p>
    <!--<img src="image.png" />-->
{% endblock %}
